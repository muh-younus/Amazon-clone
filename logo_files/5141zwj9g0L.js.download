'use strict';mix_d("P13NSCCards__p13n-desktop-carousel:p13n-desktop-carousel__WqhoQslQ","exports tslib @p/A @c/metrics @c/aui-carousel @c/dom @c/remote-operations @c/scoped-dom @p/a-carousel-framework @c/logger @c/aui-utils @c/aui-untrusted-ajax @c/browser-operations @c/aui-modal @p/jQuery".split(" "),function(aa,p,oa,z,pa,ba,qa,ra,sa,ta,ua,va,wa,xa,ya){function E(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var v=E(oa),za=E(pa),J=E(ba),O=E(qa),w=E(ra),Aa=E(sa),D=E(ta),S=E(ua),
T=E(va),R=E(wa),Ba=E(xa),y=E(ya),ca={},U=function(a,c,b){void 0===c&&(c="");void 0===b&&(b=1);c=a+c;ca.hasOwnProperty(c)||(ca[c]=!0,z.count(a,(z.count(a)||0)+b))},Ca=function(a){U(v["default"].capabilities.mobile?"Card:EERU:SharedLib:mobile:render":"Card:EERU:SharedLib:desktop:render");var c=function(d,e){d={$event:{preventDefault:v["default"].$.noop,stopPropagation:v["default"].$.noop},$target:d.getContent().find('[data-a-tab-name="'+e+'"]'),data:{name:"energyEfficiencyTabSet"}};v["default"].trigger("a:declarative:a-tabs:click",
d)},b=function(d,e){var g=d&&d.$event,f=d&&d.data||{},m=f.activeTabName,k=f.modalHeight,t=f.name;g&&g.preventDefault&&g.preventDefault();g&&g.stopPropagation&&g.stopPropagation();g=e.get(t);g||(v["default"].on("a:popover:beforeShow:"+t,function(h){h.popover&&h.popover.getContent&&(h=h.popover.getContent(),h.find(".a-manually-loaded").parent().css("min-height",k),v["default"].loadDescendantImagesManually(h))}),g=e.create(d.$target,f));g.show();c(g,m)};a.when("a-secondary-view").execute("RegisterEnergyEfficiencyEventMobile",
function(d){v["default"].declarative("card-energy-efficiency-secondary-view","click",function(e){U("Card:EERU:SharedLib:mobile:click",e&&e.data&&e.data.name||"");b(e,d)})});a.when("a-modal").execute("RegisterEnergyEfficiencyEventDesktop",function(d){v["default"].declarative("card-energy-efficiency-modal","click",function(e){U("Card:EERU:SharedLib:desktop:click",e&&e.data&&e.data.name||"");b(e,d)})})},Da=function(a){a.when("ready").execute("EEBadgeProductFicheResize",function(c){var b=v["default"].$;
b(".energyEfficiencyContainer").each(function(d,e){d=b(e).find(".energyEfficiencyProductFicheLabel").first();e=b(e).find("svg").first();d.parent().outerHeight()>e.outerHeight()&&(d.removeClass("a-size-small"),d.addClass("a-size-micro"),d.parent().outerHeight()>e.outerHeight()&&d.parent().css("line-height","10px"))})})},A=function(a,c){a&&(c?S["default"].show(a):S["default"].hide(a))},V=function(a,c){return(a=c.getElementsByClassName(a))&&1===a.length?a[0]:void 0},K=function(a){z.count(a,(z.count(a)||
0)+1)},Ea=function(){function a(c,b,d,e,g,f,m,k){var t=this;this.throttledScrollAction=v["default"].throttle(function(){return p.__awaiter(t,void 0,void 0,function(){return p.__generator(this,function(h){switch(h.label){case 0:return[4,this.getNextBatchIfBottomInView()];case 1:return h.sent(),[2]}})})},200);this.containerDataset=this.getContainerDataset(c);this.bottomOfListElement=b;this.containerForInsertion=d;this.insertFetchedItems=e;this.errorFetchingItemsElement=f;this.fetchAsinsRemoteOperation=
g;this.spinnerFetchingItemsElement=m;this.batchSize=k||8;this.processingStatus={batchFailureCount:0,currentIndex:Number(c.dataset.indexOffset)||0,individualBatchAttemptsCount:0,isAllContentLoaded:!1,isProcessing:!1}}a.prototype.getContainerDataset=function(c){if(!c.dataset||!c.dataset.asinList)throw Error("Dataset not present or does not contain required data!");return{asinList:JSON.parse(c.dataset.asinList),linkParameters:c.dataset.linkParameters||"{}",reftag:c.dataset.reftag||"",strategyId:c.dataset.strategyId||
"",widgetGroupId:c.dataset.widgetGroupId||""}};a.prototype.getNextItemBatch=function(c){var b=this;this.processingStatus.individualBatchAttemptsCount+=1;this.processingStatus.isProcessing=!0;var d=this.processingStatus.currentIndex;if(d>=this.containerDataset.asinList.length)return this.processingStatus.isAllContentLoaded=!0,Promise.resolve(void 0);A(this.spinnerFetchingItemsElement,!0);d=this.containerDataset.asinList.slice(d,d+this.batchSize);var e=d.map(function(g,f){return f+b.processingStatus.currentIndex});
return this.fetchAsinsRemoteOperation({ids:d,indexes:e,linkparameters:this.containerDataset.linkParameters,offset:e[0].toString(),reftagprefix:this.containerDataset.reftag}).then(function(g){A(b.spinnerFetchingItemsElement,!1);b.insertFetchedItems(c,g);b.processingStatus.batchFailureCount=0;b.processingStatus.currentIndex+=b.batchSize;b.processingStatus.individualBatchAttemptsCount=0;b.processingStatus.isProcessing=!1}).catch(function(g){console.log("Error fetching items: "+g);if(2<=b.processingStatus.individualBatchAttemptsCount){b.processingStatus.batchFailureCount+=
1;if(2<=b.processingStatus.batchFailureCount){b.processingStatus.isProcessing=!0;A(b.spinnerFetchingItemsElement,!1);A(b.errorFetchingItemsElement,!0);return}b.processingStatus.currentIndex+=b.batchSize}void b.getNextItemBatch(c)})};a.prototype.getNextBatchIfBottomInView=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(c){switch(c.label){case 0:if(this.processingStatus.isProcessing)return[3,3];this.processingStatus.isProcessing=!0;return S["default"].onScreen(this.bottomOfListElement,
500)&&!this.processingStatus.isAllContentLoaded&&2>this.processingStatus.batchFailureCount?[4,this.getNextItemBatch(this.containerForInsertion)]:[3,2];case 1:return c.sent(),[3,3];case 2:this.processingStatus.isProcessing=!1,c.label=3;case 3:return[2]}})})};a.prototype.isInErrorState=function(){return 2<=this.processingStatus.batchFailureCount};a.prototype.resetLazyLoading=function(){this.processingStatus.batchFailureCount=0;A(this.errorFetchingItemsElement,!1)};return a}(),da=function(a,c,b){void 0===
c&&(c=function(){});void 0===b&&(b=function(){});return p.__awaiter(void 0,void 0,void 0,function(){return p.__generator(this,function(d){switch(d.label){case 0:return a.dataset.event?[4,Fa(a.dataset.event,a,c,b)]:[3,2];case 1:return d.sent(),[3,5];case 2:return a.dataset.url?[4,Ga(a.dataset.url,c,b)]:[3,4];case 3:return d.sent(),[3,5];case 4:D["default"].log("Element is missing dataset.url or dataset.event attribute"),b(),d.label=5;case 5:return[2]}})})},Fa=function(a,c,b,d){return p.__awaiter(void 0,
void 0,void 0,function(){var e,g,f,m,k,t;return p.__generator(this,function(h){switch(h.label){case 0:e=function(r){return p.__awaiter(void 0,void 0,void 0,function(){var q,l;return p.__generator(this,function(n){switch(n.label){case 0:return q=function(u){u?b():(D["default"].log("Failed to call PPDS custom API"),d())},l=function(u){D["default"].log("Caught error when calling PPDS custom API: "+u.stack);d()},[4,r().then(q).catch(l)];case 1:return n.sent(),[2]}})})};g=function(r){return p.__awaiter(void 0,
void 0,void 0,function(){var q;return p.__generator(this,function(l){switch(l.label){case 0:if(!c.dataset.asin)return[3,2];q={asin:c.dataset.asin};return[4,e(r.bind(null,q))];case 1:return l.sent(),[3,3];case 2:D["default"].log("Element was missing required data: asin"),d(),l.label=3;case 3:return[2]}})})};f=a;switch(f){case "NOT_INTERESTED":return[3,1];case "DELETE_NOT_INTERESTED":return[3,5]}return[3,7];case 1:if(!c.dataset.asin)return[3,3];m={asin:c.dataset.asin,expirationTime:Ha(c.dataset.suppressiondays),
reason:c.dataset.reason,strategyId:c.dataset.strategyId||c.dataset.strategyid,widgetGroupId:c.dataset.widgetGroupId||c.dataset.widgetgroupid};k=O["default"].setup(["recordNotInterested"]);return[4,e(k.recordNotInterested.bind(null,m))];case 2:return h.sent(),[3,4];case 3:D["default"].log("Element was missing required data: asin"),d(),h.label=4;case 4:return[3,8];case 5:return t=O["default"].setup(["deleteNotInterested"]),[4,g(t.deleteNotInterested)];case 6:return h.sent(),[3,8];case 7:return D["default"].log("Invalid PPDS event type: "+
a),d(),[3,8];case 8:return[2]}})})},Ga=function(a,c,b){return p.__awaiter(void 0,void 0,void 0,function(){return p.__generator(this,function(d){switch(d.label){case 0:return[4,T["default"].post(a,{accepts:"text/html,*/*",contentType:"application/x-www-form-urlencoded"}).then(function(){c()}).catch(function(e){D["default"].log("Failed to call AJAX endpoint "+a+" with error: "+e.message,"ERROR");b()})];case 1:return d.sent(),[2]}})})},Ha=function(a){if(a&&(a=Number.parseInt(a,10),!(0>=a||(a=new Date(Date.now()+
864E5*a),Number.isNaN(a.getTime())))))return a.toISOString()},Ia=function(a,c,b,d,e,g,f,m,k,t){var h=a.getElementsByClassName(d)[0],r=a.getElementsByClassName(e)[0],q=m?a.getElementsByClassName(m)[0]:void 0,l=a.querySelector(g);if(!r||!h||!l)throw Error("One or more elements to record feedback are not present.");d=function(n,u){n&&(n.onclick=function(){return p.__awaiter(void 0,void 0,void 0,function(){var x;return p.__generator(this,function(B){switch(B.label){case 0:return[4,da(n,function(){u&&
k?k():!u&&t&&t();A(l,!1);A(r,u);A(h,!u);q&&(q.style.opacity=u?"0.3":"1");f&&K(f.prefix+":record-feedback:success")},function(){console.log("Failed to record feedback on click");A(l,!0);f&&K(f.prefix+":record-feedback:failure")})];case 1:return B.sent(),f&&(x=u?f.primaryAction:f.secondaryAction,K(f.prefix+":record-feedback:"+x)),[2]}})})})};c=V(c,a);d(c,!0);a=V(b,a);d(a,!1)},Ja=function(a,c,b,d,e){var g=function(t){return O["default"].setup(["getCanariesFeedbackReasons"]).getCanariesFeedbackReasons(t)},
f=d.getElementsByClassName("p13n-not-interested-reasons")[0],m=V("p13n-not-interested-success-message",d),k=d.querySelector("#p13n-record-feedback-error-message");return function(){e.includes(a)||e.push(a);f?(A(m,!1),f.hasChildNodes()||g({asin:a,strategyId:c,widgetGroupId:b}).then(function(t){Array.prototype.slice.call(t.getElementsByClassName("p13n-feedback-reasons-option")).forEach(function(h){h.getElementsByTagName("input")[0].onclick=function(){return p.__awaiter(void 0,void 0,void 0,function(){return p.__generator(this,
function(r){da(h,function(){A(k,!1);A(f,!1);A(m,!0)},function(){console.log("Failed to record feedback reason on click");k&&A(k,!0)});return[2]})})}});f.appendChild(t)}),A(f,!0)):A(m,!0)}},Ka=function(a,c){return function(){var b=c.indexOf(a);-1<b&&c.splice(b,1)}},La={ctiList:["Website/Personalization/Report a Problem CX"],category:"Website",type:"Personalization",item:"Report a Problem CX",folder:"9c9c97c9-6f69-4dba-a55d-26045c6a3068",group:"P13N Report a Problem CX"},Ma=[{ctiList:["Website/Personalization/Similarities",
"Website/Detail Page/Similarities"],category:"Website",type:"Personalization",item:"Similarities",folder:"4d16d05d-9a17-4b36-b8fe-9ee159ff81de",group:"Similarities"}],Qa=function(a){var c=w["default"].cardRoot.querySelector(".p13n-report-flag"),b=R["default"].setup();b.define("showFlag","mouseover",function(){c.classList.remove("p13n-report-flag-hide")});b.define("hideFlag","mouseout",function(){c.classList.add("p13n-report-flag-hide")});b.attach("showFlag",a);b.attach("hideFlag",a);var d=w["default"].cardRoot.querySelector(".internal-flag-form"),
e=d.querySelector(".internal-flag-env-data").dataset,g=d.querySelector(".internal-flag-title-text"),f=d.querySelector(".internal-flag-description").firstElementChild,m=d.querySelector(".internal-flag-alias"),k=d.querySelector(".internal-flag-response-message"),t=function(h){h.preventDefault();h=function(n){return!n||!n.trim()};if(h(g.value)||h(f.value)||h(m.value))return W(k,!1,"Something went wrong. One of the required fields was missing."),!1;h=w["default"].cardRoot.querySelectorAll(".a-dynamic-image");
var r;if(r=w["default"].cardRoot.querySelector(".a-carousel-heading")){var q=Na(a,h.length);r="Internal user reported issue '"+g.value+"' with widget: "+r.innerText}else q=Oa(a),r="Internal user reported issue '"+g.value+"'";h=Pa(h,q,f.value,m.value,e);var l=La;Ma.forEach(function(n){n.ctiList.includes(e.cti)&&(l=n)});T["default"].post("https://p13ngoals.corp.amazon.com/sims",{accepts:"text/html, application/json",contentType:"application/json;charset=UTF-8"},{sim_params:{assigned_folder:l.folder,
description:h,descriptionContentType:"text/amz-markdown-sim",extensions:{tt:{assignedGroup:l.group,category:l.category,impact:5,item:l.item,type:l.type}},tags:[{id:"internal-problem-generated"}],title:r}}).then(function(n){W(k,!0,n)}).catch(function(n){W(k,!1,n)});return!1};d.onsubmit=function(h){return t(h)};b=w["default"].cardRoot.querySelector(".p13n-desktop-report-problem-flag-data");if(b.dataset.name)v["default"].on("a:popover:hide:"+b.dataset.name,function(){d.reset();k.innerText=""})},Na=function(a,
c){if(!a.dataset.aCarouselOptions)return D["default"].log("Empty ASIN List in carouselElement.dataset.aCarouselOptions","ERROR"),[];a=JSON.parse(a.dataset.aCarouselOptions).ajax.id_list;var b=w["default"].cardRoot.querySelector(".a-carousel-firstvisibleitem");b=(Number(b.value)||1)-1;return a.map(function(d){return JSON.parse(d).id}).slice(b,b+c)},Oa=function(a){return(a=a.dataset.asinList)?a.split(","):[]},Pa=function(a,c,b,d,e){for(var g="",f=0;f<a.length;f++){var m=a[f];g+=(m?"![]("+m.src+")":
"IMAGE MISSING")+"\nASIN: "+(c[f]?c[f]:"ASIN MISSING")+"\n\n"}return"**This SIM-T ticket is created by the 'Report a Problem' internal tool. To know more, here's its wiki: https://w.amazon.com/bin/view/Personalization/CoreRecommendations/Projects/Canaries/Report-a-Problem-UX-on-P13NWidget/UserGuide/**\n\n**Alias:** ["+(d+"](https://phonetool.amazon.com/users/"+d+")\n**Comment:** "+b+"\n\n**Widget Group ID:** "+e.widgetGroupId+"\n**Strategy ID:** "+e.strategyId+"\n**CTI:** "+e.cti+"\n**Facets:** ")+
(e.facets+"\n**Content Reftag:** "+e.reftag+"\n"+(""!==e.baseAsin?"**Page ASIN:** "+e.baseAsin+"\n":"")+"\n**SessionID:** ")+(e.sessionId+"\n**MarketplaceID:** "+e.marketplaceId+"\n**Device Type:** "+e.deviceType+"\n\n**List of ASINs:**\n\n")+g},W=function(a,c,b){c?(a.classList.remove("a-color-error"),b.responseBody&&"object"===typeof b.responseBody?b.responseBody.response&&b.responseBody.response.id?a.innerHTML="Success, here's the <a href=\"https://t.corp.amazon.com/"+b.responseBody.response.id+
'" target="_blank">SIM-T ticket</a> you created.':(D["default"].log("Fail to find the id of the SIM-T ticket created in the response body of response data.","ERROR"),a.innerText="Success, but we could not find the link to the SIM-T ticket."):(D["default"].log("The response body of response data is not an object.","ERROR"),a.innerText="Success, but we could not find the link to the SIM-T ticket.")):(a.classList.add("a-color-error"),a.innerText="string"===typeof b?b:"Oops! Something went wrong. Please try again.")},
Ra={feedbackModalInit:function(a,c){var b={prefix:"p13n-desktop-feedback-modal",primaryAction:"not-interested",secondaryAction:"remove-not-interested"},d=[],e=w["default"].cardRoot.querySelector(".p13n-desktop-canaries-kebab-data");if(e){K(b.prefix+":kebab:render");e.onclick=function(){return K(b.prefix+":kebab:click")};w["default"].cardRoot.querySelector(".p13n-desktop-feedback-modal-link").onclick=function(){return K(b.prefix+":modal:open")};var g=w["default"].cardRoot.querySelector(".p13n-ni-iyr-redirect");
g&&(g.onclick=function(){return K(b.prefix+":iyr:click")});g=w["default"].cardRoot.getElementsByClassName("p13n-canaries-desktop-feedback-modal")[0];if(!g)throw Error("Dataset not present or does not contain required data!");var f=g.querySelector("#endOfList"),m=w["default"].cardRoot.getElementsByClassName("p13n-desktop-feedback-modal-faceouts-list")[0],k=g.querySelector("#p13n-desktop-feedback-modal-loading-items"),t=g.querySelector("#p13n-desktop-feedback-modal-error-loading-items"),h=new Ea(e,
f,m,function(n,u){var x;if(u.hasChildNodes()){u=Array.from(u.childNodes);try{for(var B=p.__values(u),F=B.next();!F.done;F=B.next()){var L=F.value;u=L;var C=u.getElementsByClassName("p13n-individual-feedbackButton")[0];Ia(u,"p13n-individual-feedbackButton","p13n-feedback-undo-button","p13n-desktop-feedback-modal-initial-faceout","p13n-desktop-feedback-modal-undo-faceout","#p13n-record-feedback-error-message",b,"p13n-feedback-list-asin-image",Ja(C.dataset.asin||"",e.dataset.strategyId||"",e.dataset.widgetGroupId||
"",u,d),Ka(C.dataset.asin||"",d));n.appendChild(L);C.dataset.strategyId=e.dataset.strategyId;C.dataset.widgetGroupId=e.dataset.widgetGroupId}}catch(M){var G={error:M}}finally{try{F&&!F.done&&(x=B.return)&&x.call(B)}finally{if(G)throw G.error;}}}},function(n){return O["default"].setup(["getCanariesFeedbackModalItems"]).getCanariesFeedbackModalItems(n)},t,k);w["default"].cardRoot.querySelector(".p13n-desktop-feedback-modal-link").addEventListener("click",function(){return p.__awaiter(void 0,void 0,
void 0,function(){return p.__generator(this,function(n){switch(n.label){case 0:return""!==m.innerHTML||h.isInErrorState()?[3,2]:[4,h.getNextItemBatch(m)];case 1:return n.sent(),[3,4];case 2:if(!h.isInErrorState())return[3,4];h.resetLazyLoading();return[4,h.getNextItemBatch(m)];case 3:n.sent(),n.label=4;case 4:return[2]}})})});g.addEventListener("wheel",h.throttledScrollAction);var r=function(n){return O["default"].setup(["refreshCard"]).refreshCard(n)};g=e.dataset.uniqueId;f=e.dataset.input;!f&&(k=
w["default"].cardRoot.querySelector(".p13n-desktop-canaries-wrapper-data"),null===k||void 0===k?0:k.dataset)&&(f=k.dataset.input);var q=JSON.parse(f||"{}"),l=w["default"].cardRoot.querySelector("#p13n-desktop-feedback-modal-close-message");v["default"].on("a:popover:hide:p13n-desktop-feedback-modal_"+g,function(){return p.__awaiter(void 0,void 0,void 0,function(){var n,u,x,B,F,L,C,G,M;return p.__generator(this,function(H){if(0<d.length&&q&&q.content){n=q.content.recommendations;u=[];try{for(x=p.__values(n),
B=x.next();!B.done;B=x.next())F=B.value,L=F.id,C=d.indexOf(L),0>C&&u.push(F)}catch(I){G={error:I}}finally{try{B&&!B.done&&(M=x.return)&&M.call(x)}finally{if(G)throw G.error;}}u.length<c?l?(l.style.display="inline",l.style.position="absolute",l.style.top=(w["default"].cardRoot.offsetHeight-l.offsetHeight)/2+"px",l.style.right=(w["default"].cardRoot.offsetWidth-l.offsetWidth)/2+"px"):D["default"].log("Could not find the changeover element for message surfacing"):(q.content.recommendations=u,r(q).then(function(I){w["default"].cardRoot.innerHTML=
I.outerHTML;a()}).catch(function(I){D["default"].log("Error fetching items: "+I)}))}return[2]})})})}}},Sa={setupModal:function(a){return p.__awaiter(void 0,void 0,void 0,function(){var c;return p.__generator(this,function(b){c=w["default"].cardRoot.querySelector(".p13n-report-problem-modal-root");if(!c)return[2];Qa(a);return[2]})})}},ea=[],Ta=function(a){var c=Array.prototype.slice.call(a.querySelectorAll("[data-metrics]"));c.push(a);c.forEach(function(b){if(b&&b.dataset&&b.dataset.metrics&&(!b.id||
!ea.includes(b.id))){var d=JSON.parse(b.dataset.metrics),e;for(e in d)d.hasOwnProperty(e)&&z.count(e,d[e]);b.removeAttribute("data-metrics");b.id&&ea.push(b.id)}})},fa=/(?=[ \-\/])|(?=[\u3105-\u312F])|(?=[\u31A0-\u31BA])|(?=[\u4E00-\u9FD5])|(?=[\u3400-\u4DB5])|(?=[\uF900-\uFAFF])|(?=[\u3040-\u309F])|(?=[\u30A0-\u30FF])|(?=[\u3190-\u319F])/,ha=/[^\/\-\[\]():\s]/,Ua=function(a){var c=v["default"].$("<div>")[0];c.classList.add("p13n-sc-offscreen-truncate");var b=parseInt(a.getAttribute("data-rows")||
"2",10),d=function(){var f=a.innerHTML;a.innerHTML="&hellip;";var m=a.clientHeight;a.innerHTML=f;return m}();if(b){if(d){var e=function(f){c.innerHTML=f;return Math.round(c.clientHeight/d)<=b},g=function(f,m){f=f.split(m);var k=Math.floor(a.clientWidth/12),t=function(r){c.classList.add("p13n-sc-offscreen-truncate");c.style.overflow="hidden";c.textContent=r;a.appendChild(c);r=a.clientWidth>=a.scrollWidth;a.removeChild(c);return r},h=function(r){var q=r.length-k;r.trim().length>k&&!t(r)&&Array.prototype.slice.call(r).map(function(l,
n){return n>k&&n<=q&&ha.test(l)?"&shy;"+l:l});return r};return f.map(function(r){return h(r)}).join("")};return{truncate:function(){var f=a.innerHTML.trim(),m=a.textContent||"";f=g(f,fa);a.appendChild(c);if(e(f))a.removeChild(c),a.innerHTML=f;else{var k=f.split(fa);for(var t=1,h=k.length,r,q,l=0;t!==h;)if(r=Math.floor((h+t)/2),q=k.slice(0,r).join("")+"&hellip;",e(q)){if(1>=h-r){for(l=r;0<l&&!ha.test(k[l-1]);)l--;break}t=r}else h=r;k=0===l?void 0:k.slice(0,l).join("")+"&hellip;";k?(a.innerHTML=k,a.setAttribute("title",
m)):(D["default"].log("Unable to successfully truncate line "+f,"ERROR"),a.removeChild(c))}}}}D["default"].log("Truncation element does not have a line height or it is zero","ERROR")}else D["default"].log("Truncation element missing necessary line number data","ERROR")},Va=function(a){var c=Array.prototype.slice.call(a.getElementsByClassName("p13n-sc-truncate"));a=a.getElementsByClassName("p13n-sc-truncate-fallback");(window.CSS&&CSS.supports&&CSS.supports("-webkit-line-clamp","1")?c:c.concat(Array.prototype.slice.call(a))).filter(function(b){return!!b.offsetParent}).map(function(b){var d=
Ua(b);d&&(d.truncate(),b.classList.add("p13n-sc-truncated"),b.classList.remove("p13n-sc-truncate"),b.classList.remove("p13n-sc-truncate-fallback"),b.className=b.className.replace(/p13n-sc-line-clamp-\d/g,""))})},X=function(a){return 0===Math.floor(a/10)?"0"+a.toString():a.toString()},Wa=function(a){var c=Date.now();var b=a.dayscountdowntoendtemplate,d=a.expiredstring,e=a.hourscountdowntoendtemplate,g=a.minutescountdowntoendtemplate;a=parseInt(a.endtime,10);if(c<=a){d=null;var f=a-c;a=Math.floor(f/
864E5);var m=Math.floor(f/36E5);c=Math.floor(f/6E4%60);f=Math.floor(f/1E3%60);if(1<a&&b&&(d=b,null!==d))return b=d.replace("${daysCount}",a.toString());g&&(d=0===m?g:e);return null!==d?(b=d.replace("_hours_",X(m)),b=b.replace("_minutes_",X(c)),b=b.replace("_seconds_",X(f))):""}return d},Xa=function(a){if(null!==a&&a.dataset.endtime){a.dataset.callbackAttached="true";var c=setInterval(function(){a.innerText===a.dataset.expiredstring&&clearInterval(c);var b=Wa({dayscountdowntoendtemplate:a.dataset.dayscountdowntoendtemplate||
"",endtime:a.dataset.endtime||"",expiredstring:a.dataset.expiredstring||"",hourscountdowntoendtemplate:a.dataset.hourscountdowntoendtemplate||"",minutescountdowntoendtemplate:a.dataset.minutescountdowntoendtemplate||""});a.innerText=b},1E3)}},P=function(a,c){return a.querySelector("[class*="+c+"]")},Ya=function(a,c,b){a=JSON.parse(a);a.adCreativeMetaData=c.adCreativeMetaData;a.feedbackFormContainerId=b;return encodeURI(JSON.stringify(a))},Za=function(a,c,b,d){return p.__awaiter(void 0,void 0,void 0,
function(){var e,g,f,m,k,t,h,r;return p.__generator(this,function(q){e="adFeedbackModal_"+a;q=(null===(r=P(c,"ad-feedback-modal-container"))||void 0===r?void 0:r.className)||"";g="."+c.className+" ."+q.replace(" ",".");m=(f=b().adCreativeMetaData.adCreativeDetails)?f.length:0;k=c.dataset.deviceType||"desktop";q=Math.max(560,125*m+130);var l=m;var n=k;l=d&&"true"===d.toLowerCase()?2>l?605:810:"tablet"==n?2>l?545:775:2>l?430:645;t={a11yOpenMessage:"",width:q,height:l};try{return h=Ba["default"].create(e,
g,t),[2,h]}catch(u){throw z.count("adfeedback:cards:clientDesktop:modalCreation:failure",1),Error("Modal Creation Failed : "+u);}})})},bb=function(a,c,b,d,e,g,f){var m="rtl"===document.getElementsByTagName("html")[0].dir?"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var k=P(J["default"].cardRoot,m);a.on("beforeShow",function(){return p.__awaiter(void 0,void 0,void 0,function(){var t,h;return p.__generator(this,function(r){switch(r.label){case 0:return t=$a(a,c,b),[4,a.render(function(q){var l=
"250px",n=b().adCreativeMetaData.adCreativeDetails;n&&2>n.length&&(l="150px");k.style.marginTop=l;q.innerHTML="";l=q.appendChild;n=document.getElementsByTagName("html")[0].dir;var u=J["default"].createElement("div"),x=J["default"].createElement("div");u.innerHTML=e;"rtl"===n?(u.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),
x.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(u.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),x.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
x.appendChild(u);l.call(q,x);l=document.getElementsByTagName("html")[0].dir;n=J["default"].createElement("div");"rtl"===l?n.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):n.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");ab(k,n,d,t,g);q.appendChild(n)})];case 1:return r.sent(),(h=document.querySelector(".a-button-close"))&&h.setAttribute("aria-label",
f),[2]}})})})},$a=function(a,c,b){b=b();var d=b.adCreativeMetaData.adCreativeDetails;null===d||void 0===d?void 0:d.sort(function(e,g){return e.adCreativeIndex<g.adCreativeIndex?-1:1});return Ya(c,b,a.id)},ab=function(a,c,b,d,e){c.appendChild(a);"function"==typeof z.uet&&z.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});T["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===b?
"en-US":b}},{pl:d,deviceType:"desktop"}).then(function(g){return p.__awaiter(void 0,void 0,void 0,function(){var f,m,k;return p.__generator(this,function(t){"function"==typeof z.uet&&z.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});z.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);f=J["default"].createElement("div");f.innerHTML=String(g.responseBody);for(m=0;m<f.children.length;++m)k=f.children[m],"SCRIPT"===k.tagName?Y("script",k,c):"LINK"===k.tagName?
Y("link",k,c):Y("div",k,c);c.removeChild(a);return[2]})})}).catch(function(){"function"==typeof z.uet&&z.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});z.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);c.innerHTML=e});"function"==typeof z.uex&&z.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},Y=function(a,c,b){var d=J["default"].createElement(a);d.innerHTML=c.innerHTML;c.getAttributeNames().forEach(function(e){d.setAttribute(e,c.getAttribute(e)||
"")});b.appendChild(d)},ia={},cb=function(a,c){return p.__awaiter(void 0,void 0,void 0,function(){var b,d,e,g,f,m,k,t,h;return p.__generator(this,function(r){b=P(a,"ad-feedback-primary-link");d=c().adFeedbackLabelId;e=R["default"].setup();g="open-modal"+d;f=c().adCreativeMetaData.adCreativeDetails;m=a.dataset;k=m.isDsaEnabled;t=m.weblabTreatment;h=String(k);"undefined"===h&&(h=f&&0<f.length?f[0].selectionSignals?"true":"false":"false");"true"===h&&"T1"!==t&&(h="false");e.attach(g,b);e.define(g,"click",
function(){return p.__awaiter(void 0,void 0,void 0,function(){var q;return p.__generator(this,function(l){switch(l.label){case 0:return(q=ia[d])?[3,2]:[4,Za(d,a,c,h)];case 1:q=l.sent();var n=a.dataset,u=n.formHeaderText,x=n.dsaFormHeaderText;bb(q,n.adFeedbackPayload,c,n.currentLocale,"true"===h?x:u,n.formLoadErrorText,n.closeButtonAriaText);ia[d]=q;l.label=2;case 2:return q.show(),[2]}})})});try{b.addEventListener("keydown",function(q){if(" "===q.key||"Enter"===q.key)q.preventDefault(),b.click()})}catch(q){console.log("Couldnt add keydown event listner")}return[2]})})},
db=function(a,c){var b=R["default"].setup(),d="mouse-enter"+c;c="mouse-leave"+c;var e=P(a,"ad-feedback-primary-link"),g=P(a,"ad-feedback-text-desktop"),f=P(a,"ad-feedback-sprite");b.attach(d,e);b.define(d,"mouseenter",function(){f.style.backgroundPosition="0px -12px";g.style.color="#111111"});b.attach(c,e);b.define(c,"mouseleave",function(){f.style.backgroundPosition="0px 0px";g.style.color="#555"})},eb=function(a){return p.__awaiter(void 0,void 0,void 0,function(){var c,b,d,e;return p.__generator(this,
function(g){switch(g.label){case 0:return g.trys.push([0,3,,4]),c=a(),b=w["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+c.adFeedbackLabelId)[0],d=b.dataset.isSponsoredLabelActive,"false"===(d||"false").toLowerCase()?[2]:[4,db(b,c.adFeedbackLabelId)];case 1:return g.sent(),[4,cb(b,a)];case 2:return g.sent(),[3,4];case 3:throw e=g.sent(),z.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+e);case 4:return[2]}})})},
fb=function(a){a=J["default"].cardRoot.getElementsByClassName(a);return Array.prototype.slice.call(a)},hb=function(a,c){fb("p13n-sc-unified-ad-label").forEach(function(b){b={adFeedbackLabelId:b.dataset.adFeedbackLabelId||"",adFeedbackAsin:b.dataset.adFeedbackAsin||"",adId:b.dataset.adId||"",campaignId:b.dataset.campaignId||"",advertiserId:b.dataset.advertiserId||"",marketplaceId:b.dataset.marketplaceId||"",isLocationUsed:b.dataset.locationUsed||"",isInterestBasedAdsOptOut:b.dataset.interestBased||
"",title:b.dataset.asinTitle||"",price:b.dataset.asinPrice||"",currencyCode:b.dataset.currencyCode||""};b.adFeedbackLabelId&&b.adFeedbackAsin&&b.adId&&b.campaignId&&b.advertiserId&&b.marketplaceId&&b.isLocationUsed&&b.isInterestBasedAdsOptOut&&gb(b,c,a)})},gb=function(a,c,b){var d="mobile"===c?ja(a.adFeedbackLabelId,ka(a,"mobile")):ja(a.adFeedbackLabelId,ka(a,"desktop"));b(function(){return d})},ka=function(a,c){var b=c=p.__assign,d=a.adFeedbackAsin,e=a.adId,g=a.campaignId,f=a.title;var m=a.price;
var k=a.currencyCode;m=m&&k?{amount:m,currencyCode:k}:void 0;k=a.advertiserId;var t=a.marketplaceId;b=b.call(p,{},{asin:d,adCreativeIndex:0,adId:e,campaignId:g,title:f,priceInfo:m,advertiserIdNS:k&&t?"axiom."+t+"."+k:void 0});d=a.isLocationUsed;a=a.isInterestBasedAdsOptOut;a=void 0===d||void 0===a?void 0:{version:1,context:!0,location:"true"===d,pastActivity:"true"===a?0:1};return{adCreativeDetails:[c.call(p,b,{selectionSignals:a})]}},ja=function(a,c){return{adFeedbackLabelId:a,adCreativeMetaData:c}},
ib={initCarousel:function(a){return p.__awaiter(void 0,void 0,void 0,function(){var c,b,d;return p.__generator(this,function(e){c=(a||{}).afterPageLoaded;b=w["default"].cardRoot.classList.contains("p13n-sc-shoveler")?[w["default"].cardRoot]:Array.prototype.slice.call(w["default"].cardRoot.getElementsByClassName("p13n-sc-shoveler"));d=O["default"].setup(["getCarouselItems"]);if(null===b||void 0===b||!b.length)return[2];b.forEach(function(g){return p.__awaiter(void 0,void 0,void 0,function(){var f,
m,k,t,h;return p.__generator(this,function(r){switch(r.label){case 0:f=function(){v["default"].loadDynamicImage("[data-name]='"+h+"' .p13n-sc-dynamic-image");Va(g);Ta(g);null===c||void 0===c?void 0:c(g);var q=window.P;Ca(q);Da(q)};f();if(g.classList.contains("p13n-carousel-initialized"))return[2];g.classList.add("p13n-carousel-initialized");m=Aa["default"].getCarousel(ba.unscope(g));k=za["default"].getCarousel(g);t=g.dataset||{};h=m.getAttr("name");return[4,Promise.all([k.initialized,Sa.setupModal(g)])];
case 1:return r.sent(),v["default"].on("a:carousel:"+h+":change:pageSize",f),v["default"].on("a:carousel:"+h+":change:loading",f),v["default"].on("a:carousel:"+h+":change:animating",f),v["default"].on("a:carousel:"+h+":change:fetchedItems",f),k.attachRemoteOperation(function(q){var l=q.indexes;q=q.ids;var n=d,u=n.getCarouselItems,x=p.__assign,B=p.__assign({},t),F=String(l[0]||0);var L=l[0]||0,C,G,M=0,H=t.aCarouselOptions?t.aCarouselOptions:void 0;if(H&&(H=JSON.parse(H),H=null===(C=null===H||void 0===
H?void 0:H.ajax)||void 0===C?void 0:C.id_list))for(C=0;C<L&&C<H.length;C++){var I=JSON.parse(H[C]);"true"===((null===(G=null===I||void 0===I?void 0:I.metadataMap)||void 0===G?0:G.isSponsoredProduct)?I.metadataMap.isSponsoredProduct:"false")&&(M+=1)}return u.call(n,x.call(p,B,{ids:q,indexes:l,offset:F,adOffset:M}))}),[2]}})})});return[2]})})}},jb={updateHandler:function(a){var c;void 0===a&&(a=w["default"].cardRoot);a=Array.prototype.slice.call(a.querySelectorAll('[class*="dealsCardDealTimer"]:not([data-callback-attached])'));
try{for(var b=p.__values(a),d=b.next();!d.done;d=b.next())Xa(d.value)}catch(g){var e={error:g}}finally{try{d&&!d.done&&(c=b.return)&&c.call(b)}finally{if(e)throw e.error;}}}},kb={enableDesktopUnifiedAdLabels:function(){hb(eb,"desktop")}},lb={initializeQuantitySelectorWidgets:function(){v["default"].trigger("quantity-selector-widget:loadStatesAndInitialize")}},la=document.body.style.overflow,Q=function(a){return a.find("#cpf-sidesheet-content-container")},mb=function(a){var c,b;null!==(c=a.$target)&&
void 0!==c&&c.length&&(null===(b=a.$target)||void 0===b?0:b.hasClass("cpf-sidesheet-anchor-end"))&&v["default"].delay(function(){N().find("a[href], button").first().focus()},0)},nb=function(a){var c;null!==(c=a.$target)&&void 0!==c&&c.length&&v["default"].delay(function(){v["default"].$(document.activeElement).hasClass("cpf-sidesheet-anchor-start")&&N().find("a[href], button").last().focus()},0)},ma=function(){document.body.style.overflow=la?la:"";y["default"]("#cpf-sidesheet-background").hide();
var a=N();a.attr("aria-hidden","true");y["default"]("#cpf-sidesheet").attr("aria-hidden","true");Q(a).attr("aria-hidden","true");y["default"]("#a-page").attr("aria-hidden","false");Z(a).hide();ob()},N=function(){return y["default"]("#cpf-sidesheet-containerempty-div")},Z=function(a){return a.find("#cpf-sidesheet-secondary-content-container")},ob=function(){var a=y["default"]("#cpf-sidesheet").width()+50;pb({right:"-"+a+"px"},function(){y["default"]("#cpf-sidesheet").hide()})},qb=function(){y["default"]("#cpf-sidesheet").show(function(){v["default"].animate(y["default"]("#cpf-sidesheet"),
{right:"0"},300,"ease-out",function(){y["default"]("#cpf-sidesheet-close").show()})})},pb=function(a,c){v["default"].animate(y["default"]("#cpf-sidesheet"),a,300,"ease-out",c)},rb=function(a){a=R["default"].setup().define;a("cpf-side-sheet-open","click",function(c){var b;c=null===(b=c.currentTarget)||void 0===b?void 0:b.getAttribute("cpf-side-sheet-content-id");var d=N();b=y["default"]("#"+c);d&&0!==d.length||(c=y["default"](document.createElement("div")),c.attr("id","cpf-sidesheet-containerempty-div"),
d=w["default"].cardRoot.getElementsByClassName("cpf-sidesheet-container")[0].innerHTML,c.append(d),y["default"]("body").prepend(c),d=c);b&&0!==b.length&&(Q(d).html(b.html()),b=N(),Q(b).show(),b.attr("aria-hidden","false"),y["default"]("#cpf-sidesheet").attr("aria-hidden","false"),Q(b).attr("aria-hidden","false"),b.find(".cpf-sidesheet-close-button").focus(),y["default"]("#a-page").attr("aria-hidden","true"),y["default"]("body").css("overflow","hidden"),y["default"]("#cpf-sidesheet-background").show(),
qb())});v["default"].declarative("cpf-side-sheet-close","click",function(c){ma()});v["default"].declarative("cpf-side-sheet-secondary-open","click",function(c){var b,d=N();c=null===(b=c.data)||void 0===b?void 0:b.preloadDomId;b=y["default"]("#"+c);d.find(".cpf-sidesheet-close-button").focus();Q(d).hide();Z(d).show().html(b.html())});v["default"].declarative("cpf-bottom-sheet-secondary-back","click",function(c){c=N();c.find(".cpf-sidesheet-close-button").focus();Q(c).show();Z(c).hide()});v["default"].declarative("cpf-sidesheet-capture",
"keydown",function(c){"keydown"!==c.type||27!==c.$event.keyCode&&27!==c.$event.key||ma()});v["default"].declarative("cpf-sidesheet-capture","focusin",function(c){mb(c)});v["default"].declarative("cpf-sidesheet-capture","focusout",function(c){nb(c)})},na=function(){return p.__awaiter(void 0,void 0,void 0,function(){var a,c;return p.__generator(this,function(b){switch(b.label){case 0:return a=ib.initCarousel({afterPageLoaded:function(d){jb.updateHandler(d);lb.initializeQuantitySelectorWidgets();kb.enableDesktopUnifiedAdLabels()}}),
c=Ra.feedbackModalInit(na,1),rb(),[4,a];case 1:return b.sent(),[4,c];case 2:return b.sent(),[2]}})})};aa._operationNames=["getCarouselItems","getCanariesFeedbackModalItems","refreshCard","deleteNotInterested","recordNotInterested"];aa.card=na});
